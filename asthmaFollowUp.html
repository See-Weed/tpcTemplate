<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asthma Under Follow Up</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="css\styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #ebccfe;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <!-- <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li> -->
        <li>
          <ul>
            <li><a href="diabetes.html">Diabetes Follow Up</a></li>
            <li><a href="asthmaFollowUp.html">Asthma Follow Up</a></li>
            <li><a href="hypertension.html">HTN Follow Up</a></li>
            <li><a href="ams.html">AMS</a></li>
            <li><a href="pain.html">Pain Clinic</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <p></p>
    <h1>Asthma Follow Up Clinical Clerking Format</h1>

    <form id="clerking-form" style="display: block">
      <table style="width: 100%">
        <tr>
          <th style="width: 70%">Gender:</th>
          <td style="width: 30%">
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  id="gender"
                  name="gender"
                  value="male"
                  onchange="calculatePeakExpiratoryRate()"
                />
                Male
              </label>
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  id="gender"
                  name="gender"
                  value="female"
                  onchange="calculatePeakExpiratoryRate()"
                />
                Female
              </label>
            </div>
          </td>
        </tr>
        <tr>
          <th style="width: 70%">Age:</th>
          <td style="width: 30%">
            <input
              type="text"
              id="age"
              name="age"
              oninput="calculatePeakExpiratoryRate()"
            />
          </td>
        </tr>
        <tr>
          <th for="height" style="width: 70%">Height (meter):</th>
          <td style="width: 30%">
            <input
              type="text"
              id="height"
              name="height"
              oninput="calculatePeakExpiratoryRate()"
            />
          </td>
        </tr>
        <tr>
          <th style="width: 70%" for="pPEFR">Patient's PEFR:</th>
          <td style="width: 30%">
            <input
              type="text"
              id="pPEFR"
              name="pPEFR"
              oninput="calculatePeakExpiratoryRate()"
            />
          </td>
        </tr>
        <tr>
          <th style="width: 70%" for="ePEFR">Estimated PEFR:</th>
          <td style="width: 30%">
            <div id="result"></div>
          </td>
        </tr>
        <tr>
          <th style="width: 70%" for="PEFRStatus">% of Predicted:</th>
          <td style="width: 30%">
            <div id="PEFRStatus"></div>
          </td>
        </tr>
      </table>

      <table style="width: 100%">
        <tr>
          <th style="width: 70%">Compliance to treatment:</th>
          <td style="width: 30%">
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="1" name="compliance" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="compliance" value="No" /> No
              </label>
            </div>
          </td>
        </tr>
      </table>

      <label for="education">Health Education Topics: </label>
      <table style="width: 100%">
        <tr>
          <td style="width: 70%">
            Asthma pathophysiology
            <div class="info-container">
              <img
                src="image/question.png"
                alt="Question Mark Icon"
                width="18"
                height="18"
              />
              <div class="info-card">
                <h6>1. What is Asthma?</h6>
                <h6>
                  Asthma is a chronic respiratory condition that causes
                  inflammation and narrowing of the airways, making it difficult
                  to breathe. The airways become sensitive to certain triggers
                  such as allergens, irritants, exercise, and stress.
                </h6>

                <h6>2. What happens during an Asthma attack?</h6>
                <h6>
                  During an asthma attack, the muscles around the airways
                  tighten, and the airway lining swells and produces excess
                  mucus. This leads to the narrowing of the airways, making it
                  difficult to breathe.
                </h6>
              </div>
            </div>
          </td>
          <td style="width: 30%">
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  id="2"
                  name="pathophysiologyEdu"
                  value="Yes"
                />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="pathophysiologyEdu" value="No" />
                No</label
              >
            </div>
          </td>
        </tr>

        <tr>
          <td>
            Aggravating factors
            <div class="info-container">
              <img
                src="image/question.png"
                alt="Question Mark Icon"
                width="18"
                height="18"
              />
              <div class="info-card">
                <h6>1.Allergens</h6>
                <h6>
                  Allergens are substances that can trigger an allergic reaction
                  in some people. Common allergens that can aggravate asthma
                  symptoms include pollen, dust mites, pet dander, and mold.
                </h6>
                <h6>2.Irritants</h6>
                <h6>
                  Irritants are substances that can irritate the airways and
                  trigger asthma symptoms. Common irritants that can aggravate
                  asthma symptoms include cigarette smoke, air pollution, strong
                  odors, and cleaning products.
                </h6>
                <h6>3.Exercise</h6>
                <h6>
                  Physical activity and exercise can trigger asthma symptoms in
                  some people. This is known as exercise-induced
                  bronchoconstriction. Symptoms can include coughing, wheezing,
                  and shortness of breath during or after exercise.
                </h6>
                <h6>4.Respiratory infections</h6>
                <h6>
                  Respiratory infections such as colds, flu, and sinus
                  infections can aggravate asthma symptoms. These infections can
                  cause inflammation and irritation of the airways, making it
                  difficult to breathe.
                </h6>
                <h6>5.Stress and emotions</h6>
                <h6>
                  Stress and emotions can also aggravate asthma symptoms in some
                  people. Stress can cause the release of hormones that can
                  tighten the airways and make it difficult to breathe.
                </h6>
                <h6>6.Weather changes</h6>
                <h6>
                  Weather changes such as cold air, humidity, and changes in
                  barometric pressure can also aggravate asthma symptoms. Cold
                  air can cause airway constriction, while humidity can promote
                  the growth of mold and other allergens.
                </h6>
                <h6>7.Medications</h6>
                <h6>
                  Certain medications such as aspirin and nonsteroidal
                  anti-inflammatory drugs (NSAIDs) can trigger asthma symptoms
                  in some people. It is important to talk to your healthcare
                  provider about any medications you are taking and how they may
                  affect your asthma.
                </h6>
              </div>
            </div>
          </td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="3" name="aggravatingEdu" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="aggravatingEdu" value="NA" />
                NA</label
              >
            </div>
          </td>
        </tr>

        <tr>
          <td>Treatment of asthma</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="4" name="treatmentEdu" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="treatmentEdu" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>

        <tr>
          <td>Inhaler/Spacer technique</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="5" name="techniqueEdu" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="techniqueEdu" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>
        <tr>
          <td>Asthma control level</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="6" name="controlLevelEdu" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="controlLevelEdu" value="NA" />
                NA</label
              >
            </div>
          </td>
        </tr>
        <tr>
          <td>
            Action plan
            <div class="info-container">
              <img
                src="image/question.png"
                alt="Question Mark Icon"
                width="18"
                height="18"
              />
              <div class="info-card">
                <img src="image/actionPlan.png" alt="Question Mark Icon" />
              </div>
            </div>
          </td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="7" name="actionPlanEdu" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="actionPlanEdu" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>
      </table>

      <table style="width: 100%">
        <tr>
          <th for="evaluation" style="width: 50%">
            Evaluation of Asthma Control:
          </th>
          <td style="width: 40%">
            <input
              style="width: 20%"
              type="checkbox"
              name="form-type"
              value="gina"
              oninput="assessmentForm()"
            />
            GINA

            <input
              style="width: 20%"
              type="checkbox"
              name="form-type"
              value="act"
              oninput="assessmentForm()"
            />
            ACT
          </td>
        </tr>
      </table>

      <div id="gina-form" style="display: none">
        <label for="evaluation">Evaluation of Asthma Based on GINA:</label>
        <table style="width: 100%">
          <tr>
            <td style="width: 70%">Daytime asthma sx more 2x/week</td>
            <td style="width: 30%">
              <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="nightSx"
                    value="1"
                    onchange="ginaCount()"
                  />
                  Yes
                </label>
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="nightSx"
                    value="0"
                    onchange="ginaCount()"
                  />
                  NA</label
                >
              </div>
            </td>
          </tr>
          <tr>
            <td>Any night waking due to asthma</td>
            <td>
              <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="daytimeSx"
                    value="1"
                    onchange="ginaCount()"
                  />
                  Yes
                </label>
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="daytimeSx"
                    value="0"
                    onchange="ginaCount()"
                  />
                  NA</label
                >
              </div>
            </td>
          </tr>
          <tr>
            <td>Reliever needed for sx > 2x/week</td>
            <td>
              <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="reliever"
                    value="1"
                    onchange="ginaCount()"
                  />
                  Yes
                </label>
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="reliever"
                    value="0"
                    onchange="ginaCount()"
                  />
                  NA</label
                >
              </div>
            </td>
          </tr>
          <tr>
            <td>Activity limitation due to asthma</td>
            <td>
              <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="limitation"
                    value="1"
                    onchange="ginaCount()"
                  />
                  Yes
                </label>
                <label class="btn btn-secondary">
                  <input
                    type="radio"
                    name="limitation"
                    value="0"
                    onchange="ginaCount()"
                  />
                  NA</label
                >
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div id="act-form" style="display: none">
        <label for="evaluation">Evaluation of Asthma Based on ACT:</label>
        <div>
          <tr style="display: flex">
            1. In the past 4 weeks, how much of the time did your asthma keep
            you from getting as much done at work, school or at home?
          </tr>
          <tr>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" name="ACT1" value="1" />All of the time
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT1" value="2" />
                Most of the time</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT1" value="3" />Some of the time
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT1" value="4" />
                A little of the time</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT1" value="5" />None of the time
              </label>
            </div>
          </tr>
          <tr style="display: flex">
            2. During the past 4 weeks, how often have you had shortness of
            breath?
          </tr>
          <tr>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" name="ACT2" value="1" />More than once a day
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT2" value="2" />
                Once a day</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT2" value="3" />3 to 6 times/week
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT2" value="4" />
                Once or twice/week</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT2" value="5" />Not at all
              </label>
            </div>
          </tr>
          <tr style="display: flex">
            3. During the past 4 weeks, how often did your asthma symptoms
            (wheezing, coughing, shortness of breath, chest tightness or pain)
            wake you up at night or earlier than usual in the morning?
          </tr>
          <tr>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" name="ACT3" value="1" />≥4 nights/week
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT3" value="2" />
                2 or 3 nights/week</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT3" value="3" />Once a week
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT3" value="4" />
                Once or twice</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT3" value="5" />Not at all
              </label>
            </div>
          </tr>
          <tr style="display: flex">
            4. During the past 4 weeks, how often have you used your rescue
            inhaler or nebulizer medication (such as albuterol)?
          </tr>
          <tr>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" name="ACT4" value="1" />≥3 times/day
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT4" value="2" />
                1 or 2 times/day</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT4" value="3" />2 or 3 times/week
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="ACT4" value="4" />
                Once a week or less</label
              >
              <label class="btn btn-secondary">
                <input type="radio" name="ACT4" value="5" />Not at all
              </label>
            </div>
          </tr>
          <tr style="display: flex">
            5. How would you rate your asthma control during the past 4 weeks?
          </tr>
          <tr>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary" ;width:60px;>
                <input
                  type="radio"
                  name="ACT5"
                  value="1"
                  onchange="actCount()"
                />Not controlled at all
              </label>
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  name="ACT5"
                  value="2"
                  onchange="actCount()"
                />
                Poorly controlled</label
              >
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  name="ACT5"
                  value="3"
                  onchange="actCount()"
                />Somewhat controlled
              </label>
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  name="ACT5"
                  value="4"
                  onchange="actCount()"
                />
                Well controlled</label
              >
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  name="ACT5"
                  value="5"
                  onchange="actCount()"
                />Completely controlled
              </label>
            </div>
          </tr>
        </div>
      </div>
      <label for="control">Level of Control:</label>
      <div id="finalControl"></div>

      <label for="management">Optimising Management:</label>
      <table style="width: 100%">
        <tr>
          <td style="width: 70%">Aggravating factors</td>
          <td style="width: 30%">
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="8" name="aggravating" value="Yes" />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="aggravating" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>
        <tr>
          <td>Inhaler / Spacer techniques</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input
                  type="radio"
                  id="9"
                  name="InhalerTechniques"
                  value="Yes"
                />
                Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="InhalerTechniques" value="NA" />
                NA</label
              >
            </div>
          </td>
        </tr>
        <tr>
          <td>Asthma diary</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="10" name="diary" value="Yes" /> Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="diary" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>
        <tr>
          <td>Action plan</td>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" id="11" name="actionPlan" value="Yes" /> Yes
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="actionPlan" value="NA" /> NA</label
              >
            </div>
          </td>
        </tr>
      </table>

      <label for="options"
        >Treatment Options:
        <div class="info-container">
          <img
            src="image/question.png"
            alt="Question Mark Icon"
            width="18"
            height="18"
          />
          <div class="info-card">
            <img src="image/GINA.png" alt="GINA Ladder" />
          </div>
        </div>
      </label>
      <table style="width: 100%">
        <tr>
          <td>
            <div class="btn-group" data-toggle="buttons">
              <label class="btn btn-secondary">
                <input type="radio" name="options" value="SABA ONLY" /> SABA
                ONLY
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="options" value="ICS+SABA" /> ICS +
                SABA
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="options" value="ICS+LABA" /> ICS +
                LABA
              </label>
              <label class="btn btn-secondary">
                <input type="radio" name="options" value="Oral" /> Appropriate
                Oral</label
              >
            </div>
          </td>
        </tr>
      </table>
      <label for="additionalCx">Other Comments:</label>
      <textarea id="additionalCx" name="additionalCx"></textarea>

      <label for="additionalMx">Additional Management:</label>
      <textarea id="additionalMx" name="additionalMx"></textarea>
      <br />

      <table style="width: 100%">
        <tr>
          <td>
            <button type="submit" onclick="makeSummary()">Generate</button>
          </td>
          <!-- <td>
            <div onclick="setAllDone();">
              <img
                src="image/cheat.png"
                id="cheatImage"
                alt="cheat"
                style="width: 35px; height: 35px; margin-right: 10px"
              />
            </div>
          </td> -->
        </tr>
      </table>
    </form>

    <div class="card">
      <div class="container">
        <button type="submit" onclick="copyToClipboard()">Copy to TPC</button>
        <div id="summary"></div>
      </div>
    </div>

    <!-- Include jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </body>
</html>

<script>
  function makeSummary() {
    // Get the form and summary elements
    const form = document.getElementById("clerking-form");
    const summary = document.getElementById("summary");
    const estimatedPEFR = document.getElementById("result");
    const asthmaControl = document.getElementById("finalControl");

    // Add event listener to form submit button
    form.addEventListener("submit", (e) => {
      // Prevent form submission
      e.preventDefault();

      // Get form data
      const formData = new FormData(form);

      // Create an empty object to store the form data
      const formDataObj = {};

      // Loop through the form data and add each key-value pair to the formDataObj
      for (const [key, value] of formData.entries()) {
        formDataObj[key] = value;
      }
      if (document.querySelector('input[value="gina"]').checked) {
        ginaControl = `GINA Control:
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.nightSx}
        <strong>Any night waking due to astma:</strong> ${formDataObj.daytimeSx}
        <strong>Reliever needed for sx > 2x/week:</strong> ${formDataObj.reliever}
        <strong>Activity limitation due to asthma:</strong> ${formDataObj.limitation}
        <strong>Asthma Control:</strong> ${asthmaControl.innerHTML}`;
      } else {
        ginaControl = "";
      }
      if (document.querySelector('input[value="act"]').checked) {
        actControl = `ACT Control:
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.ACT1}
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.ACT2}
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.ACT3}
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.ACT4}
        <strong>Daytime Asthma Sx more 2x/week:</strong> ${formDataObj.ACT5}
        <strong>Asthma Control:</strong> ${asthmaControl.innerHTML}`;
      } else {
        actControl = "";
      }
      // Create a summary of the form data
      const summaryHTML = `
  			<h2>Summary</h2>
        <strong>PEFR reading :</strong> ${formDataObj.pPEFR}
        <strong>Estimated PEFR:</strong> ${estimatedPEFR.innerHTML}
        <strong>% of Predicted:</strong> ${PEFRStatus.innerHTML}
        <br><strong>Education:</strong>
        <strong>Asthma pathophysiology:</strong> ${formDataObj.pathophysiologyEdu}
        <strong>Aggravating factors:</strong> ${formDataObj.aggravatingEdu}
        <strong>Treatment of asthma:</strong> ${formDataObj.treatmentEdu}
        <strong>Inhaler/Spacer technique:</strong> ${formDataObj.techniqueEdu}
        <strong>Asthma control level:</strong> ${formDataObj.controlLevelEdu}
        <strong>Action plan:</strong> ${formDataObj.actionPlanEdu}
        <br><strong>Asthma Control:</strong>
        ${ginaControl}${actControl}
        <br><strong>Optimising Management:</strong>
        <strong>Aggravating factors:</strong> ${formDataObj.aggravating}
        <strong>Inhaler/Spacer techniques :</strong> ${formDataObj.InhalerTechniques}
        <strong>Asthma Diary:</strong> ${formDataObj.diary}
        <strong>Action Plan:</strong> ${formDataObj.actionPlan}
        <br><strong>Additional Comments:</strong><br>${formDataObj.additionalCx}
        <br><strong>Additional Management:</strong><br>${formDataObj.additionalMx}
  		`;
      // Set the summary HTML
      summary.innerHTML = summaryHTML.replace(/\n/g, '<br>');
    });
  }

  /* Set all radio button to DONE */
  function setAllDone() {
    document.getElementById("1").checked = true;
    document.getElementById("2").checked = true;
    document.getElementById("3").checked = true;
    document.getElementById("4").checked = true;
    document.getElementById("5").checked = true;
    document.getElementById("6").checked = true;
    document.getElementById("7").checked = true;
    document.getElementById("8").checked = true;
    document.getElementById("9").checked = true;
    document.getElementById("10").checked = true;
    document.getElementById("11").checked = true;
  }

  /* Toggle between showing and hiding the dropdown content */
  function toggleDropdown() {
    document.getElementById("dropdown-content").classList.toggle("show");
  }

  /* Close the dropdown if the user clicks outside of it */
  window.onclick = function (event) {
    if (!event.target.matches(".dropbtn")) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      for (var i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains("show")) {
          openDropdown.classList.remove("show");
        }
      }
    }
  };

  function copyToClipboard() {
    const summaryPanel = document.getElementById("summary");
    const summaryText = summaryPanel.innerText;
    // Create a temporary textarea element to copy the text to the clipboard
    const tempTextArea = document.createElement("textarea");
    tempTextArea.value = summaryText;
    document.body.appendChild(tempTextArea);
    // Select and copy the text to the clipboard
    tempTextArea.select();
    document.execCommand("copy");
    // Remove the temporary textarea element
    document.body.removeChild(tempTextArea);
    // Provide feedback to the user (optional)
    alert("Summary copied!");
  }

  function calculatePeakExpiratoryRate() {
    var age = document.querySelector("#age").value;
    var gender = document.querySelector('input[name="gender"]:checked');
    var height = document.querySelector("#height").value;
    var currentPEFR = document.querySelector("#pPEFR").value;
    var result = document.querySelector("#result");
    var PEFRStatus = document.querySelector("#PEFRStatus");

    // Check if all inputs have been filled in
    if (age !== "" && gender !== "" && height !== "") {
      let predictedPeakExpiratoryFlowRate;

      // Use appropriate equations to calculate the peak expiratory rate based on inputs
      if (gender.value === "male") {
        predictedPeakExpiratoryFlowRate =
          9.8 * (height / 0.0254) - 1.2 * age - 72.1;
      } else if (gender.value === "female") {
        predictedPeakExpiratoryFlowRate = 159 + 5 * (height / 0.0254) - age;
      }

      // Display the result on the page
      result.innerHTML = `${predictedPeakExpiratoryFlowRate.toFixed(2)}`;
      PEFRStatus.innerHTML = `${(
        (currentPEFR / predictedPeakExpiratoryFlowRate) *
        100
      ).toFixed(2)}%`;
    } else {
      // Not enough information to calculate PEFR
      result.innerHTML =
        "Please fill in all the required information to calculate the estimated peak expiratory rate.";
    }
  }

  function assessmentForm() {
    const ginaCheckbox = document.querySelector('input[value="gina"]');
    const actCheckbox = document.querySelector('input[value="act"]');
    const ginaForm = document.getElementById("gina-form");
    const actForm = document.getElementById("act-form");

    ginaCheckbox.addEventListener("change", () => {
      if (ginaCheckbox.checked) {
        ginaForm.style.display = "block";
      } else {
        ginaForm.style.display = "none";
      }
    });

    actCheckbox.addEventListener("change", () => {
      if (actCheckbox.checked) {
        actForm.style.display = "block";
      } else {
        actForm.style.display = "none";
      }
    });
  }

  function actCount() {
    var act1 = document.querySelector('input[name="ACT1"]:checked');
    var act2 = document.querySelector('input[name="ACT2"]:checked');
    var act3 = document.querySelector('input[name="ACT3"]:checked');
    var act4 = document.querySelector('input[name="ACT4"]:checked');
    var act5 = document.querySelector('input[name="ACT5"]:checked');
    const finalControl = document.getElementById("finalControl");

    if (
      act1 !== "" &&
      act2 !== "" &&
      act3 !== "" &&
      act4 !== "" &&
      act5 !== ""
    ) {
      let actScore;
      actScore =
        parseInt(act1.value) +
        parseInt(act2.value) +
        parseInt(act3.value) +
        parseInt(act4.value) +
        parseInt(act5.value);
      let controlCategory;
      if (actScore > 19) {
        controlCategory = "Well Controlled";
      } else if (actScore <= 19) {
        controlCategory = "Uncontrolled";
      }
      controlCategory =
        // Display the result on the page
        finalControl.innerHTML = `ACT Score:${actScore};${controlCategory}`;
    } else {
      // Not enough information to calculate ACT
      finalControl.innerHTML =
        "Please fill in all the required information to calculate the estimated peak expiratory rate.";
    }
  }

  function ginaCount() {
    var gina1 = document.querySelector('input[name="nightSx"]:checked').value;
    var gina2 = document.querySelector('input[name="daytimeSx"]:checked').value;
    var gina3 = document.querySelector('input[name="reliever"]:checked').value;
    var gina4 = document.querySelector(
      'input[name="limitation"]:checked'
    ).value;
    const finalControl = document.getElementById("finalControl");

    if (gina1 !== "" && gina2 !== "" && gina3 !== "" && gina4 !== "") {
      let ginaScore;
      ginaScore =
        parseInt(gina1) + parseInt(gina2) + parseInt(gina3) + parseInt(gina4);
      let controlCategory;
      if (ginaScore == 0) {
        controlCategory = "Well Controlled";
      } else if (ginaScore > 2) {
        controlCategory = "Uncontrolled";
      } else {
        controlCategory = "Partly controlled";
      }
      // Display the result on the page
      finalControl.innerHTML = `GINA:${ginaScore};${controlCategory}`;
    }
  }
</script>
